Quick Install Instructions

Notes: Please complete all install instructions before attempting to use your new PonyDocs installation.  Failure to do so will result in frustration and keyboard tossing.

1) Configuring Apache

Modify your apache configuration for the use of friendly urls.  Modify your host to enable rewrite rules.  The following is an example of the apache configuration, if mediawiki was installed at the base of your html directory.  If your mediawiki instance resides in a sub-directory, modify the configuration accordingly.

==== START SAMPLE APACHE CONFIGURATION ====
RewriteEngine On
# Main passthrus
RewriteRule ^/api.php$ 			/api.php 		[L,QSA]
RewriteRule ^/config/(.*)$ 			/config/$1 		[L,QSA]
RewriteRule ^/skins/(.*)$		/skins/$1 	[L,QSA]
RewriteRule ^/extensions/(.*)$ 	/extensions/$1 [L,QSA]

# Rewrite rule to handle passing ugly doc urls to pretty urls
RewriteRule ^//Documentation:(.*):(.*):(.*) /Documentation/$3/$1/$2 [L,QSA,R=301]
RewriteRule ^/Documentation:(.*):(.*) /Documentation/latest/$1/$2 [L,QSA,R=301]

# get home page requests to Main_Page
RewriteRule ^/(\/*)$ /index.php?title=Main_Page [PT]
# all other requests go to specific page
RewriteRule ^/(\/*)(.*)$ /index.php?title=$3 [PT,QSA]
==== END SAMPLE APACHE CONFIGURATION ====

Restart Apache at this time so Rewrite Rules will take affect.

2) Modify LocalSettings.php

Modify your LocalSettings.php file to have an additional namespace of Documentation.  

Alpha Note: Currently, the namespace for PonyDocs is Documentation.  We will be writing in support to change this Namespace name, but for now, keep it Documentation.  You can change the index (100) of the Documentation namespace, as that customization is currently supported.

Example:
$wgExtraNamespaces[100] = "Documentation";

There are additional user permission flags that are defined.  These are branchtopic, branchmanual, inherit, viewall.  Modify your $wgGroupPermissions to add these permissions to your existing groups.  You can also create new groups for your permissions.  Review http://www.mediawiki.org/wiki/Manual:User_rights for more information.  

An example would be:

$wgGroupPermissions['docteam']['branchtopic']	 = true; // Custom permission to branch a single topic.
$wgGroupPermissions['docteam']['branchmanual']	 = true; // Custom permission to branch an entire manual.
$wgGroupPermissions['docteam']['inherit']		 = true; // Custom permission to inherit a topic.
$wgGroupPermissions['docteam']['viewall']		 = true; // Custom permission to handle View All link for topics.

Some mediawiki instances do not have $wgArticlePath property defined.  Please make sure this is defined in your LocalSettings.php.  Refer to: http://www.mediawiki.org/wiki/Manual:$wgArticlePath for more information.

Example, if mediawiki was installed at the root of your html directory:

$wgArticlePath = '/$1';

3) Install PonyDocs extension and Configure Mediawiki to Load it.

Move the extensions/PonyDocs directory into your Mediawiki's extensions directory.

Modify the PonyDocs.config.php file in the PonyDocs extension directory to fit your environment.

Update your mediawiki database schema by running the schema.sql file in the sql directory of the PonyDocs extension directory.

Finally, update your LocalSettings.php to load the extension. Add the following line to the bottom of your LocalSettings.php in your Mediawiki root directory.

include_once($IP . "/extensions/PonyDocs/PonyDocsExtension.php");

There is a PonyDocs skin that is provided in this archive.  In order to see additional Documentation features, you should use this skin.  Customize this skin to fit your environment.

4) Add your administrator user to appropriate user groups.

Visit your Mediawiki's Special:UserRights page and modify your administrator user to be added to the user group defined by PONYDOCS_AUTHOR_GROUP in your PonyDocs.config.php. 

5) Create your first product version.

Login as your administrator user and visit the Documentation:Versions page.  If Mediawiki was installed at the base of your documentation root, then simply go to /Documentation:Versions .  You'll need to Create this page.

The Documentation:Versions page contains a listing of all versions of your product, as well as the status of that version.  The status can be 'released', 'unreleased' and 'preview'.  For regular users, only 'released' can be seen.  For documentation teams, all version can be seen.  For Customer group, the 'preview' versions can also be seen.  Each line in Documentation:Versions must follow the syntax of {{#version:name|status}} to define a version.  For example, to initialize version 1.0 of your product, have the following line in your Documentation:Versions page.

{{#version:1.0|unreleased}}

Once saved, you'll be able to move to the next step, defining your first manual.

6) Creating your first manual.

Now head to /Documentation:Manuals .  You'll need to create this page.

The Documentation:Manuals page defines the Manuals available for your versions.  A version can have all the manuals, or a sub-set of the manuals you define here.  You'll create the links of the manuals to your first version in the next step.  For now, you'll need to define the first manual.  Each line in Documentation:Manuals must follow the syntax of {{#manual:shortName|displayName}} where shortName is a nospaces short version name of the manual (For example, 'admin'), and the displayName can have spaces and is the full name of the Manual (For example, 'Administration').  The following line creates a manual called Installation.

{{#manual:Installation|Installation Manual}}

Once saved, you will see the listing of your manuals.  Each manual name will be a link to create the Table of Contents for your current version (in this case, the first version you created in Documentation:Versions).  By clicking on the Manual name, you'll proceed to the next step.

7) Creating your first Table of Contents and auto-generating your first Documentation topic.

Clicking on the Installation Manual link in Documentation:Manuals will have the system direct you to Documentation:InstallationTOC1.0 (If your manual name was Installation and your first version is 1.0).  TOC pages contain the Table of Contents of the manual for that version.  The TOC page consists of Section Names and the topics which reside under those sections.  Create the page, and put the following in the TOC page.

Getting Started
* {{#topic:Before You Begin}}

[[Category:V:1.0]]

Note the use of the Category tag inside the TOC.  This will ensure the TOC is linked to version 1.0.  You must have this category tag present in order for the TOC to properly render for that version.

This will create a section called 'Getting Started', with your first topic being 'Before You Begin'

When you save the edit to your first TOC page, links to your new topics will automaticall be created. (ALPHA BUG: You may have to save your edits to the TOC page twice).  Clicking on the topic in the TOC page will take you to the new topic, which you'll be able to edit with your new content.


Should get you started!  Have fun!

For any assistance, please contact tdondich@splunk.com

Splunk > Open Source FTW!
